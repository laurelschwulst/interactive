<!DOCTYPE html>
<html>

<head>
	<title>title</title>
	<link rel="stylesheet" href="timestamp.css">
	<link rel="stylesheet" href="print.css">
</head>

<body>

<input id="letter_input" size="100"/>

<div id="letters"></div>

<!-- LETTER DEFINITION -->

<div class="letter-definition" data-character =" ">
	<div class="letter space"> </div>
</div>

<div class="letter-definition" data-character ="A">
	<div class="letter a">
		<div class="lefttopa"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottoma"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="righttopa"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="rightbottoma"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="centera"> 
			<div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="B">
	<div class="letter b">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="topb3">
			<div class="time"> </div>
		</div>
		<div class="center"> 
			<div class="date"> </div>
		</div>
		<div class="centerb"> 
			<div class="time"></div>
		</div>
		<div class="bottomb"> 
			<div class="date"> </div>
		</div>
		<div class="bottom"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="C">
	<div class="letter c">
		<div class="gtop">
			<div class="date"> </div>
		</div>
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="rightalt">
			<div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="D">
	<div class="letter d">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="bottom"> 
			<div class="date"> </div>
		</div>
		<div class="bottom2c">
			<div class="time"> </div>
		</div>
		<div class="rightd">
			<div class="date"> </div><div class="time"> </div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="E">
	<div class="letter e">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="top"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="center"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="bottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="F">
	<div class="letter f">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="top"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="center"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="G">
	<div class="letter g">
		<div class="gtop">
			<div class="date"> </div>
		</div>
		<div class="lefttop"> 
			<div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="rightd">
			<div class="time"> </div>
		</div>
		<div class="rightalt">
			<div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="H">
	<div class="letter h">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="righttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="rightbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="center"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="I">
	<div class="letter i">
		<div class="itop">
			<div class="date"> </div>
		</div>
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="ibottom">
			<div class="time"> </div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="J">
	<div class="letter j">
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="rightj2">
			<div class="time"></div>
		</div>
		<div class="rightj">
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="K">
	<div class="letter k">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="ktop">
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="kbottom">
			<div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="L">
	<div class="letter l">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="bottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="M">
	<div class="letter m">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="mleft"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="mright"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="mrightside"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="N">
	<div class="letter n">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="mleft"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="mrightside"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="O">
	<div class="letter o">
		<div class="gtop">
			<div class="date"> </div>
		</div>
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="rightj">
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="P">
	<div class="letter p">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="top"> 
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"></div>
		</div>
		<div class="topb3">
			<div class="time"> </div>
		</div>
		<div class="center"> 
			<div class="date"> </div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="Q">
	<div class="letter q">
		<div class="gtop">
			<div class="date"> </div>
		</div>
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="rightj">
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="qtail">
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="R">
	<div class="letter r">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftbottom"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="top"> 
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"></div>
		</div>
		<div class="topb3">
			<div class="time"> </div>
		</div>
		<div class="center"> 
			<div class="date"> </div>
		</div>
		<div class="kbottom">
			<div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="S">
	<div class="letter s">
		<div class="gtop">
			<div class="date"> </div>
		</div>
		<div class="topb">
			<div class="date"> </div>
		</div>
		<div class="topb2">
			<div class="time"> </div>
		</div>
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="diag">
			<div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="T">
	<div class="letter t">
	<div class="ttop">
		<div class="date"> </div><div class="time"></div>
	</div>
	<div class="tupright"> 
		<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
	</div>
	</div>
</div>

<div class="letter-definition" data-character ="U">
	<div class="letter u">
		<div class="leftbottom2"> 
			<div class="date"> </div>
		</div>
		<div class="bottomalt"> 
			<div class="time"></div>
		</div>
		<div class="bottomalt2">
			<div class="date"> </div>
		</div>
		<div class="rightu">
			<div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="leftu">
			<div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="V">
	<div class="letter v">
		<div class="mleft"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="mright"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="W">
	<div class="letter w">
		<div class="mleft"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="mright"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="wleft"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="wright"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="X">
	<div class="letter x">
		<div class="xleft"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div><div class="date"> </div>
		</div>
		<div class="xright"> 
			<div class="time"></div><div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="Y">
	<div class="letter y">
		<div class="mright"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="topy"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="Z">
	<div class="letter z">
		<div class="mright"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div><div class="time"></div>
		</div>
		<div class="topz"> 
			<div class="date"> </div><div class="time"></div>
		</div>
		<div class="bottomz"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character =".">
	<div class="letter period">
		<div class="dot"> 
			<div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character =",">
	<div class="letter comma">
		<div class="dot"> 
			<div class="time"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="!">
	<div class="letter exclam">
		<div class="lefttop"> 
			<div class="date"> </div><div class="time"></div><div class="date"> </div>
		</div>
		<div class="dota"> 
			<div class="time"></div>
		</div>
		<div class="dotb"> 
			<div class="date"></div>
		</div>
	</div>
</div>

<div class="letter-definition" data-character ="-">
	<div class="letter hyphen">
		<div class="center"> 
			<div class="date"> </div><div class="time"></div>
		</div>
	</div>
</div>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
	
	var scrollTimer;

	function GetClock($letter){
		// (Cleaned this function up a bit and added the $letter argument)
		// $letter is the jQuery object of the new letter we pass in from convertLetters
		// This function & the window.onload event was updating all .date & .time elements 
		//   which we don't want since it's resource intense & doesn't match our current use-case
		//   of wanting the time data to stay static after the letter is shown
		var d=new Date(),
			nmonth=d.getMonth(),ndate=d.getDate(),nyear=d.getFullYear(),
			nhour=d.getHours(),nmin=d.getMinutes(),nsec=d.getSeconds();

		if (nmin<=9) {
			nmin="0"+nmin;
		}
		if (nsec<=9) {
			nsec="0"+nsec;	
		} 

		$letter.find('.date').html((nmonth+1)+"/"+ndate+"/"+nyear);
		$letter.find(".time").html(nhour+":"+nmin+":"+nsec);

		return $letter;
	}

	var convertLetters = function(letter) {
		// (Cleaned this up since we're only passing in a single letter at a time in the keyup event)
		var chracterDefinition,
			$characterHTML;

		chracterDefinition = $('.letter-definition[data-character="' + letter + '"]').html();
		$characterHTML = $('<div class="letter" data-character="' + letter + '">' + chracterDefinition + '</div>');

		return GetClock($characterHTML);
	};

	// Do keyup for typing & input for anything like right click + 'paste'
	$('#letter_input').on('keyup input', function (e) {
		var $letters = $('#letters'),
			$this = $(this),
			inputText = $this.val().toUpperCase().split(''),
			$letter;

		// '> ' selects direct children since .find will find all elements with .letters, we only want the top-level .letter		
		// Iterate over all currrent .letter elements to remove ones that 
		// aren't in inputText

		function syncLetters () {
			// after making a change to the list we're iterating over
			// (by inserting or removing elements)
			// we should break out of the loop and start another loop
			// with the fresh list, hence the recursion here
			// This function returns 'false' (below) which causes .each 
			// to stop iteration

			$letters.find('> .letter').each(function(idx) {
				var $el = $(this);
				if ($el.data('character') !== inputText[idx]) {
					// Remove .letters that aren't matching our inputText
					if ($el.data('character') === inputText[idx+1]
						&& inputText[idx] !== inputText[idx+1]) {
						// It's possible this was a letter inserted, remove this one 
						$el.before(convertLetters(inputText[idx]));
						return syncLetters();
					}
					else {
						$el.remove();
						return syncLetters();
					}
				}
			});

			// return false every time to halt iteration of the .each 
			// above when this function is called recursively
			return false;
		}

		syncLetters();

		// Iterate over all inputText characters and append the ones to
		// $letters that aren't there
		$.each(inputText, function (idx) {
			if (!$letters.find('> .letter').eq(idx).length) {
				$letter = convertLetters(this);
				// Append characters from inputText that are missing in #letters
				$letters.append($letter); 
			}
		});

    	clearTimeout(scrollTimer);

		scrollTimer = setTimeout(scrollPage, 500);
	});

	function scrollPage() {
		if ($('#letters').find('> .letter').length) {
		    $('html, body').animate({
		        scrollTop: $('#letters').find('> .letter').last().offset().top
		    }, 250);
		}
	}

	
</script>


</body>

</html>